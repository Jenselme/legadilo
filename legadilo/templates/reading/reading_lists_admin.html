{% extends "base.html" %}

{% load i18n static %}

{% block title %}
    {% translate "Reading lists admin" %}
{% endblock title %}

{% block page_js %}
    <script src="{% static 'js/draggable.js' %}" nonce="{{ request.csp_nonce }}" defer></script>
{% endblock page_js %}

{% block content %}
    <h1>{% translate "Reading list admin" %}</h1>
    <a class="btn btn-outline-secondary"
       href="{% url 'reading:create_reading_list' %}"
       role="button">{% translate "Create a new reading list" %}</a>
    {% csrf_token %}
    <ul class="list-group mt-3">
        {% for reading_list in reading_lists %}
            <li id="reading-list-{{ reading_list.id }}" class="list-group-item container" draggable="true" data-reading-list-id="{{ reading_list.id }}">
                <div class="row">
                    <div class="col">{{ reading_list.title }}</div>
                    <div class="col">
                        <a href="{% url 'reading:edit_reading_list' reading_list_id=reading_list.id %}">{% translate "Edit/Delete reading list" %}</a>
                    </div>
                </div>
            </li>
        {% endfor %}
    </ul>
    <p class="mt-3 form-text">{% translate "Reading lists can be reordered with drag & drop." %}</p>

    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="reading-lists-reordered" class="toast" role="alert" aria-live="polite" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto">Legadilo</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                {% translate "Reading lists successfully reordered." %}
            </div>
        </div>

        <div id="reading-lists-reorder-error" class="toast" role="alert" aria-live="polite" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto">Legadilo</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body text-bg-warning">
                {% translate "Failed to reorder reading lists." %}
            </div>
        </div>
    </div>
{% endblock content %}
